@echo off
:: é˜²æ­¢ä¸­æ–‡ä¹±ç 
chcp 65001 >nul
title Hexo å…¨è‡ªåŠ¨å‘å¸ƒå·¥å…· - Sudoer2025
color 0A

echo =======================================================
echo        ğŸš€ Sudoer2025 åšå®¢ä¸€é”®å‘å¸ƒç³»ç»Ÿ
echo =======================================================
echo.

:: 1. è·å–æ›´æ–°æ—¥å¿— (å¦‚æœä¸å¡«ç›´æ¥å›è½¦ï¼Œé»˜è®¤ä¸º "Daily Update")
set /p msg="è¯·è¾“å…¥æœ¬æ¬¡æ›´æ–°å†…å®¹ (ç›´æ¥å›è½¦é»˜è®¤ Daily Update): "
if "%msg%"=="" set msg=Daily Update

echo.
echo [1/2] æ­£åœ¨å¤‡ä»½æºç åˆ° GitHub (Backup Source)...
echo -------------------------------------------------------
:: è°ƒç”¨ WSL æ‰§è¡Œ Git å‘½ä»¤
:: æ³¨æ„ï¼š-d Ubuntu æ˜¯ä½ çš„ WSL å‘è¡Œç‰ˆåå­—ï¼Œå¦‚æœæŠ¥é”™è¯·æ£€æŸ¥ wsl -l
wsl -d Ubuntu -u sudoer2025 --cd /mnt/f/my-blog bash -c "git add . && git commit -m '%msg%' && git push"

echo.
echo [2/2] æ­£åœ¨ç¼–è¯‘å¹¶å‘å¸ƒåˆ° VPS (Deploy Site)...
echo -------------------------------------------------------
:: è°ƒç”¨ WSL æ‰§è¡Œ Hexo å‘½ä»¤
wsl -d Ubuntu -u sudoer2025 --cd /mnt/f/my-blog bash -c "hexo clean && hexo g && hexo d"

echo.
echo =======================================================
echo           ğŸ‰ æ­å–œï¼å‘å¸ƒå…¨æµç¨‹ç»“æŸï¼
echo =======================================================
pause